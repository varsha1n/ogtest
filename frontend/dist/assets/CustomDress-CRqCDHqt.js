import{r as c,j as s}from"./index-S9ZFpKWr.js";import{s as e,a as I}from"./axios-ZbXFLSnU.js";function P(){var u,g;const[l,x]=c.useState({Fit:"db1.png",Necklines:"dn1.png",Sleeves:"ds1.png"}),[i,j]=c.useState("pattern1.png"),[o,N]=c.useState(null),[d,m]=c.useState(!1),C=[{name:"Fit",subOptions:["db1.png","db2.png","db3.png"]},{name:"Necklines",subOptions:["dn1.png","dn2.png","dn3.png","dn4.png","dn5.png"]},{name:"Sleeves",subOptions:["ds1.png","ds2.png","ds3.png","ds4.png","ds5.png"]}],p=[{name:"pattern1.png",cloth:"Bold Twill Shirt - White",color:"White",price:"$20"},{name:"pattern2.png",cloth:"Cotton Oxford Shirt - Blue",color:"Blue",price:"$25"},{name:"pattern3.png",cloth:"Wrinkle-Free Shirt - Green",color:"Green",price:"$30"},{name:"pattern4.png",cloth:"Lavender Herringbone Shirt",color:"Lavender",price:"$35"},{name:"pattern6.png",cloth:"Dark Blue Pinstriped Shirt",color:"Blue",price:"$40"},{name:"pattern7.png",cloth:"White Shirt",color:"White",price:"$40"}],v=t=>{j(t),r(t,l)},S=(t,n)=>{const a={...l,[t]:n};x(a),i&&r(i,a)},r=(t,n)=>{I.post("http://127.0.0.1:5000/dress",{pattern:t,designs:n}).then(a=>{const b=`data:image/png;base64,${btoa(a.data.blend_image)}`;N(b)}).catch(a=>{console.error("Error sending request to server:",a)})};c.useEffect(()=>{r(i,l)},[]);const f=()=>{m(!0)},$=()=>{const t=document.querySelector(`.${e.popupContainer}`);t&&t.classList.add(e.exiting),setTimeout(()=>{m(!1)},500)},h=()=>p.find(t=>t.name===i);return s.jsxs("div",{className:e.main,children:[s.jsxs("div",{className:e.leftColumn,children:[s.jsx("div",{className:e.patternContainer,children:p.map(t=>s.jsxs("div",{className:e.patternItem,onClick:()=>v(t.name),children:[s.jsx("img",{src:`/images_show/${t.name}`,alt:t.name,className:`${e.patternImage} ${i===t.name?e.selected:""}`}),s.jsxs("div",{className:e.patternInfo,children:[s.jsx("p",{className:e.color,children:t.color}),s.jsx("p",{className:e.price,children:t.price})]})]},t.name))}),s.jsx("div",{className:e.customContainer,children:s.jsx("button",{className:e.customizeButton,onClick:f,children:s.jsx("span",{className:e.textContainer,children:s.jsx("span",{className:e.text,children:"Customize"})})})})]}),s.jsxs("div",{className:e.rightColumn,children:[s.jsx("div",{className:e.outputContainer,style:{width:"570px",height:"700px"},children:s.jsx("img",{src:o||"",alt:"Result",className:e.outputImagedress,style:{display:o?"block":"none",width:"auto",height:"90%",marginLeft:0}})}),s.jsx("div",{className:e.infoContainer,children:s.jsxs("div",{className:e.patternInfoContainer,children:[s.jsxs("div",{className:e.selectedPatternInfo,children:[s.jsx("h2",{className:e.customtext,children:"Your Custom Dress"}),s.jsx("p",{className:e.clothtext,children:((u=h())==null?void 0:u.cloth)||"Formal Shirt - White"}),s.jsx("p",{className:e.pricetext,children:((g=h())==null?void 0:g.price)||"$25"})]}),s.jsx("button",{className:e.addToCartButton,children:"Add to Cart"})]})})]}),d&&s.jsxs("div",{className:`${e.popupContainer} ${d?"":e.exiting}`,children:[s.jsx("h1",{className:e.popupTitle,children:"Customize Your Dress"}),s.jsx("button",{className:e.closeButton,onClick:$,children:"Ã—"}),s.jsx("div",{className:e.optionsContainer,children:C.map(t=>s.jsxs("div",{className:e.optionSection,children:[s.jsx("h2",{className:e.optionTitle,children:t.name}),s.jsx("div",{className:e.imageContainer,children:t.subOptions.map(n=>s.jsx("div",{className:`${e.imageWrapper} ${l[t.name]===n?e.selected:""}`,onClick:()=>S(t.name,n),children:s.jsx("img",{src:`/images_show/${n}`,alt:n,className:e.optionimage})},n))})]},t.name))})]})]})}export{P as default};
